!function(e,t,n){if("object"==typeof n&&"string"!=typeof n.nodeName)t(e,n);else{n={};var r=["1.3.34-iab3426"];function i(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=i(e[t]));return Object.freeze(e)}for(var o in r.push("default"),t(e,n),n)n.hasOwnProperty(o)&&(null==Object.getOwnPropertyDescriptor(e,o)&&Object.defineProperty(e,o,{value:{}}),r.forEach((function(t){if(null==Object.getOwnPropertyDescriptor(e[o],t)){var r=i(n[o]);Object.defineProperty(e[o],t,{get:function(){return r},enumerable:!0})}})))}}("undefined"==typeof global?this:global,(function(e,t){"use strict";var n,r=r||{};r.scope={},r.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},r.arrayIterator=function(e){return{next:r.arrayIteratorImpl(e)}},r.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.arrayFromIterator=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},r.arrayFromIterable=function(e){return e instanceof Array?e:r.arrayFromIterator(r.makeIterator(e))},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.SIMPLE_FROUND_POLYFILL=!1,r.objectCreate=r.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},r.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},r.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:r.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,r.inherits=function(e,t){if(e.prototype=r.objectCreate(t.prototype),e.prototype.constructor=e,r.setPrototypeOf){var n=r.setPrototypeOf;n(e,t)}else for(n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.superClass_=t.prototype},r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r.getGlobal=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}return globalThis},r.global=r.getGlobal(this),r.SYMBOL_PREFIX="jscomp_symbol_",r.initSymbol=function(){r.initSymbol=function(){},r.global.Symbol||(r.global.Symbol=r.Symbol)},r.SymbolClass=function(e,t){this.$jscomp$symbol$id_=e,r.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})},r.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_},r.Symbol=(n=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new r.SymbolClass(r.SYMBOL_PREFIX+(t||"")+"_"+n++,t)}),r.initSymbolIterator=function(){r.initSymbol();var e=r.global.Symbol.iterator;e||(e=r.global.Symbol.iterator=r.global.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&r.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return r.iteratorPrototype(r.arrayIteratorImpl(this))}}),r.initSymbolIterator=function(){}},r.initSymbolAsyncIterator=function(){r.initSymbol();var e=r.global.Symbol.asyncIterator;e||(e=r.global.Symbol.asyncIterator=r.global.Symbol("Symbol.asyncIterator")),r.initSymbolAsyncIterator=function(){}},r.iteratorPrototype=function(e){return r.initSymbolIterator(),(e={next:e})[r.global.Symbol.iterator]=function(){return this},e},r.iteratorFromArray=function(e,t){r.initSymbolIterator(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},r.polyfill=function(e,t,n,i){if(t){for(n=r.global,e=e.split("."),i=0;i<e.length-1;i++){var o=e[i];o in n||(n[o]={}),n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},r.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new r.global.Proxy(e,{get:function(n,r,i){return n==e&&"q"==r&&i==t}}));return!0===t.q}catch(e){return!1}},r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,r.ES6_CONFORMANCE=r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&r.checkEs6ConformanceViaProxy(),r.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.polyfill("WeakMap",(function(e){function t(){}function n(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!r.owns(e,s)){var n=new t;r.defineProperty(e,s,{value:n})}}function o(e){var n=Object[e];n&&(Object[e]=function(e){return e instanceof t?e:(i(e),n(e))})}if(r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&r.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var a=0,u=function(e){if(this.id_=(a+=Math.random()+1).toString(),e){e=r.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};return u.prototype.set=function(e,t){if(!n(e))throw Error("Invalid WeakMap key");if(i(e),!r.owns(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.id_]=t,this},u.prototype.get=function(e){return n(e)&&r.owns(e,s)?e[s][this.id_]:void 0},u.prototype.has=function(e){return n(e)&&r.owns(e,s)&&r.owns(e[s],this.id_)},u.prototype.delete=function(e){return!!(n(e)&&r.owns(e,s)&&r.owns(e[s],this.id_))&&delete e[s][this.id_]},u}),"es6","es3"),r.MapEntry=function(){},r.polyfill("Map",(function(e){if(r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&r.ES6_CONFORMANCE)return e}else if(function(){if(r.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(r.makeIterator([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),o=i.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=i.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!i.next().done)}catch(e){return!1}}())return e;r.initSymbolIterator();var t=new WeakMap,n=function(e){if(this.data_={},this.head_=s(),this.size=0,e){e=r.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};n.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.data_[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},n.list.push(n.entry),this.head_.previous.next=n.entry,this.head_.previous=n.entry,this.size++),this},n.prototype.delete=function(e){return!(!(e=i(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,0))},n.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=s(),this.size=0},n.prototype.has=function(e){return!!i(this,e).entry},n.prototype.get=function(e){return(e=i(this,e).entry)&&e.value},n.prototype.entries=function(){return o(this,(function(e){return[e.key,e.value]}))},n.prototype.keys=function(){return o(this,(function(e){return e.key}))},n.prototype.values=function(){return o(this,(function(e){return e.value}))},n.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},n.prototype[Symbol.iterator]=n.prototype.entries;var i=function(e,n){var i=n&&typeof n;"object"==i||"function"==i?t.has(n)?i=t.get(n):(i=""+ ++a,t.set(n,i)):i="p_"+n;var o=e.data_[i];if(o&&r.owns(e.data_,i))for(e=0;e<o.length;e++){var s=o[e];if(n!=n&&s.key!=s.key||n===s.key)return{id:i,list:o,index:e,entry:s}}return{id:i,list:o,index:-1,entry:void 0}},o=function(e,t){var n=e.head_;return r.iteratorPrototype((function(){if(n){for(;n.head!=e.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))},s=function(){var e={};return e.previous=e.next=e.head=e},a=0;return n}),"es6","es3");var i={AdEventType:{IMPRESSION:"impression",LOADED:"loaded",GEOMETRY_CHANGE:"geometryChange",SESSION_START:"sessionStart",SESSION_ERROR:"sessionError",SESSION_FINISH:"sessionFinish",MEDIA:"media",VIDEO:"video",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction",STATE_CHANGE:"stateChange"},MediaEventType:{LOADED:"loaded",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction"},ImpressionType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",UNSPECIFIED:"unspecified",LOADED:"loaded",BEGIN_TO_RENDER:"beginToRender",ONE_PIXEL:"onePixel",VIEWABLE:"viewable",AUDIBLE:"audible",OTHER:"other"},ErrorType:{GENERIC:"generic",VIDEO:"video",MEDIA:"media"},AdSessionType:{NATIVE:"native",HTML:"html",JAVASCRIPT:"javascript"},EventOwner:{NATIVE:"native",JAVASCRIPT:"javascript",NONE:"none"},AccessMode:{FULL:"full",DOMAIN:"domain",LIMITED:"limited"},AppState:{BACKGROUNDED:"backgrounded",FOREGROUNDED:"foregrounded"},Environment:{APP:"app",WEB:"web"},InteractionType:{CLICK:"click",INVITATION_ACCEPT:"invitationAccept"},CreativeType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",HTML_DISPLAY:"htmlDisplay",NATIVE_DISPLAY:"nativeDisplay",VIDEO:"video",AUDIO:"audio"},MediaType:{DISPLAY:"display",VIDEO:"video"},Reason:{NOT_FOUND:"notFound",HIDDEN:"hidden",BACKGROUNDED:"backgrounded",VIEWPORT:"viewport",OBSTRUCTED:"obstructed",CLIPPED:"clipped",UNMEASURABLE:"unmeasurable",NO_WINDOW_FOCUS:"noWindowFocus"},SupportedFeatures:{CONTAINER:"clid",VIDEO:"vlid"},VideoPosition:{PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll",STANDALONE:"standalone"},VideoPlayerState:{MINIMIZED:"minimized",COLLAPSED:"collapsed",NORMAL:"normal",EXPANDED:"expanded",FULLSCREEN:"fullscreen"},NativeViewKeys:{X:"x",LEFT:"left",Y:"y",TOP:"top",WIDTH:"width",HEIGHT:"height",AD_SESSION_ID:"adSessionId",IS_FRIENDLY_OBSTRUCTION_FOR:"isFriendlyObstructionFor",CLIPS_TO_BOUNDS:"clipsToBounds",CHILD_VIEWS:"childViews",END_X:"endX",END_Y:"endY",OBSTRUCTIONS:"obstructions",OBSTRUCTION_CLASS:"obstructionClass",OBSTRUCTION_PURPOSE:"obstructionPurpose",OBSTRUCTION_REASON:"obstructionReason",PIXELS:"pixels",HAS_WINDOW_FOCUS:"hasWindowFocus"},MeasurementStateChangeSource:{CONTAINER:"container",CREATIVE:"creative"},ElementMarkup:{OMID_ELEMENT_CLASS_NAME:"omid-element"},CommunicationType:{NONE:"NONE",DIRECT:"DIRECT",POST_MESSAGE:"POST_MESSAGE"},OmidImplementer:{OMSDK:"omsdk"}},o="omid_message_guid",s="omid_message_method",a="omid_message_version",u="omid_message_args",c=function(e,t,n,r){this.guid=e,this.method=t,this.version=n,this.args=r};c.isValidSerializedMessage=function(e){return!!e&&void 0!==e[o]&&void 0!==e[s]&&void 0!==e[a]&&"string"==typeof e[o]&&"string"==typeof e[s]&&"string"==typeof e[a]&&(void 0===e[u]||void 0!==e[u])},c.deserialize=function(e){return new c(e[o],e[s],e[a],e[u])},c.prototype.serialize=function(){var e={};return e[o]=this.guid,e[s]=this.method,e[a]=this.version,void 0!==this.args&&(e[u]=this.args),e};var d=function(e){this.to=e,this.communicationType_=i.CommunicationType.NONE};d.prototype.sendMessage=function(e,t){},d.prototype.handleMessage=function(e,t){this.onMessage&&this.onMessage(e,t)},d.prototype.serialize=function(e){return JSON.stringify(e)},d.prototype.deserialize=function(e){return JSON.parse(e)},d.prototype.isDirectCommunication=function(){return this.communicationType_===i.CommunicationType.DIRECT},d.prototype.isCrossOrigin=function(){};var p={};function l(e,t){if(!t)throw Error("Value for "+e+" is undefined, null or blank.");if("string"!=typeof t&&!(t instanceof String))throw Error("Value for "+e+" is not a string.");if(""===t.trim())throw Error("Value for "+e+" is empty string.")}function f(e,t){if(null==t)throw Error("Value for "+e+" is undefined or null")}function h(e,t){if(null==t)throw Error(e+" must not be null or undefined.");if("number"!=typeof t||isNaN(t))throw Error("Value for "+e+" is not a number")}function y(e,t,n,r){if(h(e,t),t<n||t>r)throw Error("Value for "+e+" is outside the range ["+n+","+r+"]")}function E(e,t){return e&&(e[t]||(e[t]={}))}function m(e,n,r){(r=void 0===r?void 0===t?null:t:r)&&((e=e.split(".")).slice(0,e.length-1).reduce(E,r)[e[e.length-1]]=n)}p.assertTruthyString=l,p.assertNotNullObject=f,p.assertNumber=h,p.assertNumberBetween=y,p.assertFunction=function(e,t){if(!t)throw Error(e+" must not be truthy.")},p.assertPositiveNumber=function(e,t){if(h(e,t),0>t)throw Error(e+" must be a positive number.")},m("OmidSessionClient.Partner",(function(e,t){l("Partner.name",e),l("Partner.version",t),this.name=e,this.version=t}));var v=function(e,t,n,r){r=void 0===r?i.AccessMode.FULL:r,l("VerificationScriptResource.resourceUrl",e),this.resourceUrl=e,this.vendorKey=t,this.verificationParameters=n,this.accessMode=r};v.prototype.toJSON=function(){return{accessMode:this.accessMode,resourceUrl:this.resourceUrl,vendorKey:this.vendorKey,verificationParameters:this.verificationParameters}},m("OmidSessionClient.VerificationScriptResource",v);var S=function(e,t,n,r){n=void 0===n?null:n,r=void 0===r?null:r,f("Context.partner",e),this.partner=e,this.verificationScriptResources=t,this.videoElement=this.slotElement=null,this.contentUrl=n,this.customReferenceData=r,this.underEvaluation=!1,this.serviceWindow=null};S.prototype.setVideoElement=function(e){f("Context.videoElement",e),this.videoElement=e},S.prototype.setSlotElement=function(e){f("Context.slotElement",e),this.slotElement=e},S.prototype.setServiceWindow=function(e){f("Context.serviceWindow",e),this.serviceWindow=e},m("OmidSessionClient.Context",S);var _={};_.omidGlobal=function(){if(void 0!==e&&e)return e;if("undefined"!=typeof global&&global)return global;if("undefined"!=typeof window&&window)return window;if("undefined"!=typeof globalThis&&globalThis)return globalThis;var t=Function("return this")();if(t)return t;throw Error("Could not determine global object context.")}();var O={sessionError:"reportError"},I=Object.keys(i.MediaEventType).map((function(e){return i.MediaEventType[e]})),g=["impressionOccurred"],b=function(e){e=void 0===e?_.omidGlobal:e,this.interfaceRoot_=e.omidSessionInterface};b.prototype.isSupported=function(){return null!=this.interfaceRoot_},b.prototype.sendMessage=function(e,t,n){if("registerSessionObserver"==e&&(n=[t]),O[e]&&(e=O[e]),t=this.interfaceRoot_,0<=g.indexOf(e)&&(t=t.adEvents),0<=I.indexOf(e)&&(t=t.mediaEvents),!(t=t[e]))throw Error("Unrecognized method name: "+e+".");t.apply(null,r.arrayFromIterable(n))};var M={};function T(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];A((function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(r.arrayFromIterable(t))))}),(function(){return console.error.apply(console,r.arrayFromIterable(t))}))}function A(e,t){"undefined"!=typeof jasmine&&jasmine?e():"undefined"!=typeof console&&console&&console.error&&t()}M.error=T,M.debug=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];A((function(){}),(function(){return console.error.apply(console,r.arrayFromIterable(t))}))};var C={},N=3;function R(e){return/\d+\.\d+\.\d+(-.*)?/.test(e)}function P(e,t){e=e.split("-")[0].split("."),t=t.split("-")[0].split(".");for(var n=0;n<N;n++){var r=parseInt(e[n],10),i=parseInt(t[n],10);if(r>i)break;if(r<i)return!1}return!0}C.isValidVersion=R,C.versionGreaterOrEqual=P;var w={},D="1.0.3";function x(e,t){return R(e)&&P(e,D)?t:JSON.stringify(t)}function V(e,t){return R(e)&&P(e,D)?t||[]:t&&"string"==typeof t?JSON.parse(t):[]}w.serializeMessageArgs=x,w.deserializeMessageArgs=V;var F={};function L(e){return null!=e&&void 0!==e.top&&null!=e.top}function U(e){if(e===_.omidGlobal)return!1;try{if(void 0===e.location.hostname)return!0;!function(e){""===e.x||e.x}(e)}catch(e){return!0}return!1}function W(e){return void 0===e&&"undefined"!=typeof window&&window&&(e=window),L(e)?e:_.omidGlobal}function j(e){return L(e)?e.top:_.omidGlobal}F.evaluatePageUrl=function(e){if(!L(e))return null;try{var t=e.top;return U(t)?null:t.location.href}catch(e){return null}},F.isCrossOrigin=U,F.resolveGlobalContext=W,F.resolveTopWindowContext=j,F.isTopWindowAccessible=function(e){try{return!!e.top.location.href}catch(e){return!1}};var k=function(e){d.call(this,e),this.communicationType_=i.CommunicationType.DIRECT,this.handleExportedMessage=k.prototype.handleExportedMessage.bind(this)};r.inherits(k,d),k.prototype.sendMessage=function(e,t){if(!(t=void 0===t?this.to:t))throw Error("Message destination must be defined at construction time or when sending the message.");t.handleExportedMessage(e.serialize(),this)},k.prototype.handleExportedMessage=function(e,t){c.isValidSerializedMessage(e)&&this.handleMessage(c.deserialize(e),t)},k.prototype.isCrossOrigin=function(){return!1};var B=function(e,t){t=void 0===t?_.omidGlobal:t,d.call(this,t);var n=this;this.communicationType_=i.CommunicationType.POST_MESSAGE,e.addEventListener("message",(function(e){if("object"==typeof e.data){var t=e.data;c.isValidSerializedMessage(t)&&(t=c.deserialize(t),e.source&&n.handleMessage(t,e.source))}}))};r.inherits(B,d),B.isCompatibleContext=function(e){return!!(e&&e.addEventListener&&e.postMessage)},B.prototype.sendMessage=function(e,t){if(!(t=void 0===t?this.to:t))throw Error("Message destination must be defined at construction time or when sending the message.");t.postMessage(e.serialize(),"*")},B.prototype.isCrossOrigin=function(){return!this.to||U(this.to)};var G={OMID_PRESENT_FRAME_NAME:"omid_v1_present",isOmidPresent:function(e){try{return!!e.frames&&!!e.frames[G.OMID_PRESENT_FRAME_NAME]}catch(e){return!1}},declareOmidPresence:function(e){e.frames&&e.document&&(G.OMID_PRESENT_FRAME_NAME in e.frames||(null==e.document.body&&G.isMutationObserverAvailable_(e)?G.registerMutationObserver_(e):e.document.body?G.appendPresenceIframe_(e):e.document.write('<iframe style="display:none" id="'+G.OMID_PRESENT_FRAME_NAME+'" name="'+G.OMID_PRESENT_FRAME_NAME+'"></iframe>')))},appendPresenceIframe_:function(e){var t=e.document.createElement("iframe");t.id=G.OMID_PRESENT_FRAME_NAME,t.name=G.OMID_PRESENT_FRAME_NAME,t.style.display="none",e.document.body.appendChild(t)},isMutationObserverAvailable_:function(e){return"MutationObserver"in e},registerMutationObserver_:function(e){var t=new MutationObserver((function(n){n.forEach((function(n){"BODY"===n.addedNodes[0].nodeName&&(G.appendPresenceIframe_(e),t.disconnect())}))}));t.observe(e.document.documentElement,{childList:!0})}},Y={},z=["omid","v1_SessionServiceCommunication"],H=["omid","v1_VerificationServiceCommunication"],J=["omidVerificationProperties","serviceWindow"];function $(e,t){return t.reduce((function(e,t){return e&&e[t]}),e)}function K(e,t,n,r){if(!U(t))try{var i=$(t,n);if(i)return new k(i)}catch(e){}return r(t)?new B(e,t):null}function X(e,t,n,i){for(var o=(t=r.makeIterator(t)).next();!o.done;o=t.next())if(o=K(e,o.value,n,i))return o;return null}function Q(e,t,n){n=void 0===n?G.isOmidPresent:n;var r=[e,j(e)];return t&&r.unshift(t),X(e,r,z,n)}Y.startSessionServiceCommunication=Q,Y.startVerificationServiceCommunication=function(e,t){t=void 0===t?G.isOmidPresent:t;var n=[],r=$(e,J);return r&&n.push(r),n.push(j(e)),X(e,n,H,t)};var Z="1.3.34-iab3426",q=function(e,t,n){f("AdSession.context",e),this.context_=e,this.impressionOccurred_=!1;var r=this.context_.serviceWindow||void 0;this.communication_=t||Q(W(),r),this.sessionInterface_=n||new b,this.isSessionRunning_=this.hasMediaEvents_=this.hasAdEvents_=!1,this.impressionType_=this.creativeType_=null,this.creativeLoaded_=!1,this.callbackMap_={},this.communication_&&(this.communication_.onMessage=this.handleInternalMessage_.bind(this)),this.setClientInfo_(),this.injectVerificationScripts_(e.verificationScriptResources),this.sendSlotElement_(e.slotElement),this.sendVideoElement_(e.videoElement),this.sendContentUrl_(e.contentUrl),this.watchSessionEvents_()};q.prototype.setCreativeType=function(e){if(e===i.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type cannot be redefined with value "+i.CreativeType.DEFINED_BY_JAVASCRIPT);if(this.impressionOccurred_)throw Error("Impression has already occurred");if(this.creativeLoaded_)throw Error("Creative has already loaded");if(this.creativeType_&&this.creativeType_!==i.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type cannot be redefined");if(void 0===this.creativeType_)throw Error("Native integration is using OMID 1.2 or earlier");this.sendOneWayMessage("setCreativeType",e),this.creativeType_=e},q.prototype.setImpressionType=function(e){if(e===i.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type cannot be redefined with value "+i.ImpressionType.DEFINED_BY_JAVASCRIPT);if(this.impressionOccurred_)throw Error("Impression has already occurred");if(this.creativeLoaded_)throw Error("Creative has already loaded");if(this.impressionType_&&this.impressionType_!==i.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type cannot be redefined");if(void 0===this.impressionType_)throw Error("Native integration is using OMID 1.2 or earlier");this.sendOneWayMessage("setImpressionType",e),this.impressionType_=e},q.prototype.isSupported=function(){return!!this.communication_||this.sessionInterface_.isSupported()},q.prototype.isSendingElementsSupported_=function(){return this.communication_?this.communication_.isDirectCommunication():this.sessionInterface_.isSupported()},q.prototype.registerSessionObserver=function(e){this.sendMessage("registerSessionObserver",e)},q.prototype.start=function(){this.sendOneWayMessage("startSession",{customReferenceData:this.context_.customReferenceData,underEvaluation:this.context_.underEvaluation})},q.prototype.finish=function(){this.sendOneWayMessage("finishSession")},q.prototype.error=function(e,t){this.sendOneWayMessage("sessionError",e,t)},q.prototype.registerAdEvents=function(){if(this.hasAdEvents_)throw Error("AdEvents already registered.");this.hasAdEvents_=!0,this.sendOneWayMessage("registerAdEvents")},q.prototype.registerMediaEvents=function(){if(this.hasMediaEvents_)throw Error("MediaEvents already registered.");this.hasMediaEvents_=!0,this.sendOneWayMessage("registerMediaEvents")},q.prototype.sendOneWayMessage=function(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];this.sendMessage.apply(this,[e,null].concat(r.arrayFromIterable(n)))},q.prototype.sendMessage=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];this.communication_?this.sendInternalMessage_(e,t,r):this.sessionInterface_.isSupported()&&this.sendInterfaceMessage_(e,t,r)},q.prototype.sendInternalMessage_=function(e,t,n){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return"y"===e?(3&t|8).toString(16):t.toString(16)}));t&&(this.callbackMap_[r]=t),e=new c(r,"SessionService."+e,Z,x(Z,n)),this.communication_.sendMessage(e)},q.prototype.handleInternalMessage_=function(e,t){t=e.method;var n=e.guid;if(e=e.args,"response"===t&&this.callbackMap_[n]){var r=V(Z,e);this.callbackMap_[n].apply(this,r)}"error"===t&&window.console&&T(e)},q.prototype.sendInterfaceMessage_=function(e,t,n){try{this.sessionInterface_.sendMessage(e,t,n)}catch(e){T("Failed to communicate with SessionInterface with error:"),T(e)}},q.prototype.assertSessionRunning=function(){if(!this.isSessionRunning_)throw Error("Session not started.")},q.prototype.impressionOccurred=function(){if(this.creativeType_===i.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type has not been redefined");if(this.impressionType_===i.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type has not been redefined");this.impressionOccurred_=!0},q.prototype.creativeLoaded=function(){if(this.creativeType_===i.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type has not been redefined");if(this.impressionType_===i.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type has not been redefined");this.creativeLoaded_=!0},q.prototype.setClientInfo_=function(){this.sendOneWayMessage("setClientInfo",Z,this.context_.partner.name,this.context_.partner.version)},q.prototype.injectVerificationScripts_=function(e){e&&(e=e.map((function(e){return e.toJSON()})),this.sendOneWayMessage("injectVerificationScriptResources",e))},q.prototype.sendSlotElement_=function(e){this.sendElement_(e,"setSlotElement")},q.prototype.sendVideoElement_=function(e){this.sendElement_(e,"setVideoElement")},q.prototype.sendElement_=function(e,t){e&&(this.isSendingElementsSupported_()?this.sendOneWayMessage(t,e):this.error(i.ErrorType.GENERIC,"Session Client "+t+" called when communication is cross-origin"))},q.prototype.sendContentUrl_=function(e){e&&this.sendOneWayMessage("setContentUrl",e)},q.prototype.setElementBounds=function(e){f("AdSession.elementBounds",e),this.sendOneWayMessage("setElementBounds",e)},q.prototype.watchSessionEvents_=function(){var e=this;this.registerSessionObserver((function(t){t.type===i.AdEventType.SESSION_START&&(e.isSessionRunning_=!0,e.creativeType_=t.data.creativeType,e.impressionType_=t.data.impressionType),t.type===i.AdEventType.SESSION_FINISH&&(e.isSessionRunning_=!1)}))},m("OmidSessionClient.AdSession",q);var ee=function(e,t,n,r){this.isSkippable=e,this.skipOffset=t,this.isAutoPlay=n,this.position=r};ee.prototype.toJSON=function(){return{isSkippable:this.isSkippable,skipOffset:this.skipOffset,isAutoPlay:this.isAutoPlay,position:this.position}};var te=function(e){f("AdEvents.adSession",e);try{e.registerAdEvents(),this.adSession=e}catch(e){throw Error("AdSession already has an ad events instance registered")}};te.prototype.impressionOccurred=function(){this.adSession.assertSessionRunning(),this.adSession.impressionOccurred(),this.adSession.sendOneWayMessage("impressionOccurred")},te.prototype.loaded=function(e){e=void 0===e?null:e,this.adSession.creativeLoaded(),e?this.adSession.sendOneWayMessage("loaded",e.toJSON()):this.adSession.sendOneWayMessage("loaded")},m("OmidSessionClient.AdEvents",te);var ne=function(e){f("MediaEvents.adSession",e);try{e.registerMediaEvents(),this.adSession=e}catch(e){throw Error("AdSession already has a media events instance registered")}};ne.prototype.start=function(e,t){h("MediaEvents.start.duration",e),y("MediaEvents.start.mediaPlayerVolume",t,0,1),this.adSession.sendOneWayMessage("start",e,t)},ne.prototype.firstQuartile=function(){this.adSession.sendOneWayMessage("firstQuartile")},ne.prototype.midpoint=function(){this.adSession.sendOneWayMessage("midpoint")},ne.prototype.thirdQuartile=function(){this.adSession.sendOneWayMessage("thirdQuartile")},ne.prototype.complete=function(){this.adSession.sendOneWayMessage("complete")},ne.prototype.pause=function(){this.adSession.sendOneWayMessage("pause")},ne.prototype.resume=function(){this.adSession.sendOneWayMessage("resume")},ne.prototype.bufferStart=function(){this.adSession.sendOneWayMessage("bufferStart")},ne.prototype.bufferFinish=function(){this.adSession.sendOneWayMessage("bufferFinish")},ne.prototype.skipped=function(){this.adSession.sendOneWayMessage("skipped")},ne.prototype.volumeChange=function(e){y("MediaEvents.volumeChange.mediaPlayerVolume",e,0,1),this.adSession.sendOneWayMessage("volumeChange",e)},ne.prototype.playerStateChange=function(e){f("MediaEvents.playerStateChange.playerState",e),this.adSession.sendOneWayMessage("playerStateChange",e)},ne.prototype.adUserInteraction=function(e){f("MediaEvents.adUserInteraction.interactionType",e),this.adSession.sendOneWayMessage("adUserInteraction",e)},m("OmidSessionClient.MediaEvents",ne),m("OmidSessionClient.OmidVersion",(function(e,t){l("OmidVersion.semanticVersion",e),l("OmidVersion.apiLevel",t)})),m("OmidSessionClient.VastProperties",ee);var re={VerificationVendorId:{OTHER:1,MOAT:2,DOUBLEVERIFY:3,INTEGRAL_AD_SCIENCE:4,PIXELATE:5,NIELSEN:6,COMSCORE:7,MEETRICS:8,GOOGLE:9}};function ie(e){for(var t=r.makeIterator(oe.keys()),n=t.next();!n.done;n=t.next()){n=n.value;for(var i=r.makeIterator(oe.get(n)),o=i.next();!o.done;o=i.next())if(o.value.test(e))return n}return re.VerificationVendorId.OTHER}var oe=new Map([[re.VerificationVendorId.MOAT,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.moatads\.com\/.*$/]],[re.VerificationVendorId.DOUBLEVERIFY,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.doubleverify\.com\/.*$/]],[re.VerificationVendorId.INTEGRAL_AD_SCIENCE,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.adsafeprotected\.com\/.*$/]],[re.VerificationVendorId.PIXELATE,[/^https?:\/\/(q|cdn)\.adrta\.com\/s\/.*\/(aa|aanf)\.js.*$/,/^https:\/\/cdn\.rta247\.com\/s\/.*\/(aa|aanf)\.js.*$/]],[re.VerificationVendorId.NIELSEN,[]],[re.VerificationVendorId.COMSCORE,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.voicefive\.com\/.*$/,/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.measuread\.com\/.*$/,/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.scorecardresearch\.com\/.*$/]],[re.VerificationVendorId.MEETRICS,[/^(https?:\/\/|\/\/)?s418\.mxcdn\.net\/bb-serve\/omid-meetrics.*\.js$/]],[re.VerificationVendorId.GOOGLE,[/^(https?:\/\/|\/\/)?pagead2\.googlesyndication\.com\/.*$/,/^(https?:\/\/|\/\/)?www\.googletagservices\.com\/.*$/]]]);m("OmidSessionClient.verificationVendorIdForScriptUrl",ie),m("OmidSessionClient.VerificationVendorId",re.VerificationVendorId),re.verificationVendorIdForScriptUrl=ie;var se={};function ae(e,t){return Math.abs(e-t)<.01}se.roughlyLessThan=function(e,t){return t-e>.01},se.lessThanOrRoughlyEqual=function(e,t){return e<t||ae(e,t)},se.greaterThanOrRoughlyEqual=function(e,t){return e>t||ae(e,t)}}),"undefined"==typeof exports?void 0:exports);