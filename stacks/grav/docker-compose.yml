version: '3'

services:
  grav:
    container_name: ${COMPOSE_PROJECT_NAME}-app
    image: ${GRAV_IMAGE}:${GRAV_TAG}
    restart: unless-stopped
    volumes:
      - users:/var/www/grav/user
      - logs:/var/www/grav/log
      - backups:/var/www/grav/backup
    environment:
      ADMIN_USER: ${ADMIN_USER}
      ADMIN_PASSWORD: ${ADMIN_PASSWORD}
      ADMIN_EMAIL: ${ADMIN_EMAIL}
      ADMIN_LANG: ${ADMIN_LANG}
      ADMIN_PERMISSIONS: ${ADMIN_PERMISSIONS}
      ADMIN_FULLNAME: ${ADMIN_FULLNAME}
      ADMIN_TITLE: ${ADMIN_TITLE}
      VIRTUAL_HOST: ${DOMAIN},www.${DOMAIN}
      LETSENCRYPT_HOST: ${DOMAIN},www.${DOMAIN}

volumes:
  users:
  backups:
  logs:

networks:
  default:
    name: ${NETWORK}
    external: true
